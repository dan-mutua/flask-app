user_data = <<-EOF
    #!/bin/bash

    # Install Docker
    sudo apt-get update
    sudo apt-get install -y docker.io

    # Install Minikube dependencies
    sudo apt-get install -y curl
    curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
    sudo install minikube-linux-amd64 /usr/local/bin/minikube

    # Start Minikube
    sudo minikube start --driver=docker --kubernetes-version=stable

    # Set up kubectl
    sudo apt-get install -y kubectl

    # Enable addons (optional)
    sudo minikube addons enable ingress

    # Set up kubeconfig for the current user
    mkdir -p $HOME/.kube
    sudo cp -i /root/.kube/config $HOME/.kube/
    sudo chown $(id -u):$(id -g) $HOME/.kube/config
    # Enable SSH access
    sudo ufw allow OpenSSH